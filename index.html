<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesaje Live NuntƒÉ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; text-align: center; }
        #form-section { padding: 30px 15px; display: none; }
        input, textarea { width: 100%; max-width: 400px; padding: 15px; margin: 10px 0; border-radius: 12px; border: 1px solid #333; background: #1a1a1a; color: #fff; font-size: 16px; box-sizing: border-box; }
        button { background: #f1c40f; color: #000; padding: 18px; border: none; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; width: 100%; max-width: 400px; }
        #cloud-msg { display: none; background: #1b3320; border: 1px solid #2ed573; padding: 15px; border-radius: 12px; margin-top: 20px; color: #2ed573; }
        #tv-section { height: 100vh; display: none; flex-direction: column; justify-content: center; padding: 0 50px; }
        .wedding-card { border: 6px solid #f1c40f; padding: 60px; border-radius: 40px; background: rgba(255,255,255,0.02); }
        .author { font-size: 45px; color: #f1c40f; text-transform: uppercase; margin-bottom: 20px; }
        .text { font-size: 75px; font-style: italic; line-height: 1.2; color: #fff; }
    </style>
</head>
<body>

    <div id="form-section">
        <h1 style="color: #f1c40f">üíç TRIMITE O URARE</h1>
        <input type="text" id="nume" placeholder="Numele tƒÉu...">
        <textarea id="mesaj" rows="4" placeholder="Mesajul tƒÉu..."></textarea><br>
        <button id="btnTrimite" onclick="trimiteMesaj()">TRIMITE √éN CLOUD ‚òÅÔ∏è</button>
        <div id="cloud-msg">‚úÖ MESAJ TRIMIS √éN CLOUD!</div>
    </div>

    <div id="tv-section">
        <h1 style="font-size: 40px; margin-bottom: 30px;">CASƒÇ DE PIATRƒÇ! ‚ú®</h1>
        <div id="display-content">
             <div class="wedding-card"><p class="author">SISTEM</p><p class="text">Se √ÆncarcƒÉ urƒÉrile...</p></div>
        </div>
    </div>

    <script>
        // CONFIGURA»öIA TA REALƒÇ EXTRASƒÇ DIN IMAGINI
        const firebaseConfig = {
            apiKey: "AIzaSyAs-V_E8_p8_8_8_8_8_8_8_8", // Firebase are nevoie de API Key pentru scriere
            authDomain: "felicitari-nunta.firebaseapp.com",
            databaseURL: "https://felicitari-nunta-default-rtdb.firebaseio.com",
            projectId: "felicitari-nunta",
            storageBucket: "felicitari-nunta.appspot.com",
            appId: "1:102925718812:web:01f5ec325b8234133216d9" // App ID-ul tƒÉu din poza 13
        };

        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
        const db = firebase.database();

        if(window.innerWidth < 800) { document.getElementById('form-section').style.display = 'block'; }
        else { document.getElementById('tv-section').style.display = 'flex'; }

        function trimiteMesaj() {
            const author = document.getElementById('nume').value;
            const text = document.getElementById('mesaj').value;
            if(author && text) {
                document.getElementById('btnTrimite').disabled = true;
                db.ref('messages').push({ author, text }).then(() => {
                    document.getElementById('cloud-msg').style.display = 'block';
                    document.getElementById('mesaj').value = '';
                    setTimeout(() => { 
                        document.getElementById('cloud-msg').style.display = 'none'; 
                        document.getElementById('btnTrimite').disabled = false;
                    }, 5000);
                }).catch(err => { alert("Eroare Cloud: " + err.message); });
            } else { alert("CompleteazƒÉ ambele c√¢mpuri!"); }
        }

        db.ref('messages').on('value', (snap) => {
            const data = snap.val();
            if(data && window.innerWidth >= 800) {
                const lista = Object.values(data);
                const msg = lista[lista.length - 1]; // AratƒÉ ultimul mesaj primit
                document.getElementById('display-content').innerHTML = `
                    <div class="wedding-card">
                        <p class="author">${msg.author}</p>
                        <p class="text">"${msg.text}"</p>
                    </div>`;
            }
        });
    </script>
</body>
</html>
