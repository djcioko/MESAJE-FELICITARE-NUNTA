<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Felicitări pentru Miri 💍</title>
<style>
  * {margin:0;padding:0;box-sizing:border-box;}
  body {font-family:'Georgia', serif; background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%); min-height:100vh; overflow-x:hidden; position:relative;}
  .particles {position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1;}
  .particle {position:absolute; font-size:20px; color:rgba(255,182,193,0.6); animation:float 6s ease-in-out infinite;}
  @keyframes float {0%,100%{transform:translateY(0) rotate(0deg);opacity:0} 10%,90%{opacity:1} 50%{transform:translateY(-20px) rotate(180deg);}}
  .container {max-width:800px; margin:20px auto; padding:0 20px; position:relative; z-index:2; display:flex; flex-direction:column; gap:20px;}
  .header {background:rgba(255,255,255,0.6); backdrop-filter:blur(10px); border-radius:20px; padding:30px; text-align:center; box-shadow:0 8px 32px rgba(0,0,0,0.1);}
  .media-container {width:100%; max-width:500px; height:300px; margin:20px auto; border-radius:15px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.2);}
  .media-placeholder {width:100%; height:100%; background:linear-gradient(45deg,#ff9a9e 0%,#fecfef 50%,#fecfef 100%); display:flex; align-items:center; justify-content:center; color:white; font-size:18px; cursor:pointer; transition:all 0.3s ease;}
  .media-placeholder:hover {transform:scale(1.02);}
  .uploaded-media {width:100%; height:100%; object-fit:cover;}
  .upload-btn, .export-btn {background:linear-gradient(45deg,#ff6b6b,#ee5a24); color:white; border:none; padding:12px 25px; border-radius:25px; cursor:pointer; font-size:16px; margin:5px; transition:all 0.3s ease; box-shadow:0 4px 15px rgba(238,90,36,0.3);}
  .upload-btn:hover, .export-btn:hover {transform:translateY(-2px); box-shadow:0 6px 20px rgba(238,90,36,0.4);}
  .hidden-input {display:none;}
  h1 {color:#d63031; font-size:2.5em; text-shadow:2px 2px 4px rgba(0,0,0,0.1);}
  .subtitle {color:#2d3436; font-size:1.2em; opacity:0.8; margin-top:5px;}
  .message-form, .messages-container {background:rgba(255,255,255,0.9); backdrop-filter:blur(10px); border-radius:20px; padding:30px; box-shadow:0 10px 30px rgba(0,0,0,0.1);}
  .message-form {display:flex; flex-direction:column; gap:15px;}
  .form-group label {display:block; font-weight:bold; color:#2d3436; margin-bottom:5px;}
  input[type="text"], textarea {width:100%; padding:12px; border:2px solid #ddd; border-radius:12px; font-size:16px; background:rgba(255,255,255,0.8);}
  input[type="text"]:focus, textarea:focus {outline:none; border-color:#ff6b6b; box-shadow:0 0 0 3px rgba(255,107,107,0.1);}
  textarea {height:100px; resize:vertical;}
  .submit-btn {background:linear-gradient(45deg,#ff6b6b,#ee5a24); color:white; border:none; padding:15px 40px; border-radius:30px; font-size:18px; cursor:pointer; font-weight:bold;}
  .messages-container {max-height:400px; overflow-y:auto;}
  .messages-title {color:#d63031; text-align:center; margin-bottom:15px;}
  .message {background:linear-gradient(135deg,#fff5f5 0%,#ffe8e8 100%); border-left:4px solid #ff6b6b; border-radius:15px; padding:15px; margin:10px 0; box-shadow:0 4px 15px rgba(0,0,0,0.05);}
  .message-author {font-weight:bold; color:#d63031; margin-bottom:5px;}
  .message-text {color:#2d3436; font-size:15px; line-height:1.5;}
  .message-time {color:#636e72; font-size:12px; text-align:right;}
  .heart-animation {position:fixed; color:#ff6b6b; font-size:24px; pointer-events:none; z-index:1000; animation:heartFloat 2s ease-out forwards;}
  @keyframes heartFloat {0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(-100px) scale(1.5);opacity:0;}}
  .success-message {background:linear-gradient(45deg,#00b894,#00cec9); color:white; padding:10px; border-radius:10px; text-align:center; margin:10px 0;}
</style>
</head>
<body>
<div class="particles"></div>

<div class="container">

  <div class="header">
    <h1>Felicitări pentru Miri 💍</h1>
    <p class="subtitle">Lăsați-le un mesaj frumos pentru ziua lor specială!</p>
    <div class="media-container">
      <div class="media-placeholder" onclick="document.getElementById('mediaInput').click()">📷 Apasă aici pentru a încărca o poză sau video cu mirii</div>
    </div>
    <input type="file" id="mediaInput" class="hidden-input" accept="image/*,video/*">
    <button class="upload-btn" onclick="document.getElementById('mediaInput').click()">📷 Încarcă Media</button>
    <button class="export-btn" onclick="exportMessages()">📄 Export Mesaje</button>
  </div>

  <div class="message-form">
    <div class="form-group">
      <label for="authorName">Numele tău:</label>
      <input type="text" id="authorName" placeholder="Scrie numele tău aici..." required>
    </div>
    <div class="form-group">
      <label for="messageText">Mesajul tău pentru miri:</label>
      <textarea id="messageText" placeholder="Scrie aici un mesaj frumos pentru miri..." required></textarea>
    </div>
    <button class="submit-btn" onclick="addMessage()">💕 Trimite Felicitarea</button>
  </div>

  <div class="messages-container">
    <h2 class="messages-title">Felicitări de la invitați 💝</h2>
    <div id="messagesList"></div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyCzbzObPl5-eErZ0DaghYHf3VC1awtuHCs",
    authDomain: "felicitari-nunta.firebaseapp.com",
    databaseURL: "https://felicitari-nunta-default-rtdb.firebaseio.com",
    projectId: "felicitari-nunta",
    storageBucket: "felicitari-nunta.firebasestorage.app",
    messagingSenderId: "102925718812",
    appId: "1:102925718812:web:01f5ec325b8234133216d9",
    measurementId: "G-Z0HY95L1PH"
};
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database(app);

// Mesaje Firebase
function addMessage() {
  const authorName = document.getElementById('authorName').value.trim();
  const messageText = document.getElementById('messageText').value.trim();
  if(!authorName || !messageText){ alert('Te rog completează toate câmpurile!'); return; }
  const newMessage = { author: authorName, text: messageText, timestamp: new Date().toLocaleString('ro-RO') };
  database.ref('mesaje').push(newMessage);
  document.getElementById('authorName').value='';
  document.getElementById('messageText').value='';
  showSuccessMessage();
  createHeartEffect();
}

// Ascultare mesaje live
database.ref('mesaje').on('child_added', snapshot => { displayMessage(snapshot.val()); });

function displayMessage(data){
  const messagesList = document.getElementById('messagesList');
  const messageDiv = document.createElement('div');
  messageDiv.className='message';
  messageDiv.innerHTML=`<div class="message-author">💕 ${data.author}</div><div class="message-text">${data.text}</div><div class="message-time">${data.timestamp}</div>`;
  messagesList.prepend(messageDiv);
}

function showSuccessMessage(){
  const div = document.createElement('div');
  div.className='success-message';
  div.textContent='✅ Felicitarea ta a fost trimisă cu succes!';
  document.querySelector('.message-form').appendChild(div);
  setTimeout(()=>{div.remove();},3000);
}

function createHeartEffect(){
  for(let i=0;i<5;i++){
    setTimeout(()=>{
      const heart=document.createElement('div');
      heart.className='heart-animation';
      heart.textContent='💕';
      heart.style.left=Math.random()*window.innerWidth+'px';
      heart.style.top=window.innerHeight-100+'px';
      document.body.appendChild(heart);
      setTimeout(()=>{heart.remove();},2000);
    },i*200);
  }
}

// Particule
function createParticles(){
  const particles=document.querySelector('.particles');
  const symbols=['💝','💍','🌹','💕','✨','🎉'];
  setInterval(()=>{
    const particle=document.createElement('div');
    particle.className='particle';
    particle.textContent=symbols[Math.floor(Math.random()*symbols.length)];
    particle.style.left=Math.random()*100+'%';
    particle.style.animationDelay=Math.random()*2+'s';
    particles.appendChild(particle);
    setTimeout(()=>{particle.remove();},6000);
  },3000);
}

document.addEventListener('DOMContentLoaded',()=>{ createParticles(); });

// Export
function exportMessages(){
  database.ref('mesaje').once('value').then(snapshot=>{
    let exportText='FELICITĂRI PENTRU MIRI 💍\n============================\n\n';
    snapshot.forEach((childSnap,index)=>{
      const m = childSnap.val();
      exportText+=`${index+1}. ${m.author}\nData: ${m.timestamp}\nMesaj: ${m.text}\n\n----------------------------\n\n`;
    });
    const blob = new Blob([exportText],{type:'text/plain'});
    const url = URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='felicitari-nunta.txt'; a.click(); URL.revokeObjectURL(url);
  });
}
</script>
</body>
</html>
