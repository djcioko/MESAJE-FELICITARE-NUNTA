<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesaje Live NuntƒÉ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; text-align: center; }
        
        /* --- DESIGN TELEFON (FORMULAR INVITATI) --- */
        #form-section { padding: 30px 15px; display: none; }
        .logo { font-size: 24px; font-weight: bold; color: #f1c40f; margin-bottom: 20px; }
        input, textarea { 
            width: 100%; max-width: 400px; padding: 15px; margin: 10px 0; 
            border-radius: 12px; border: 1px solid #333; background: #1a1a1a; color: #fff; font-size: 16px; 
            box-sizing: border-box;
        }
        button { 
            background: #f1c40f; color: #000; padding: 18px; border: none; 
            border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; width: 100%; max-width: 400px;
            transition: 0.3s;
        }
        /* Confirmare Cloud */
        #success-msg { display: none; background: #1e3a1e; border: 1px solid #2ed573; padding: 15px; border-radius: 12px; margin-top: 20px; animation: fadeIn 0.5s; }

        /* --- DESIGN TV (AFISARE GIGANT) --- */
        #tv-section { height: 100vh; display: none; flex-direction: column; justify-content: center; padding: 0 50px; }
        .wedding-card { border: 6px solid #f1c40f; padding: 60px; border-radius: 40px; background: rgba(255,255,255,0.02); animation: zoomIn 1s; }
        .author { font-size: 45px; color: #f1c40f; text-transform: uppercase; margin-bottom: 15px; }
        .text { font-size: 75px; font-style: italic; line-height: 1.2; color: #fff; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

    <div id="form-section">
        <div class="logo">üíç FELICITƒÇRI NUNTƒÇ</div>
        <h1>LƒÉsa»õi un mesaj mirilor</h1>
        <p style="color: #aaa;">Urarea voastrƒÉ va apƒÉrea live pe televizor!</p>
        
        <input type="text" id="nume" placeholder="Numele tƒÉu...">
        <textarea id="mesaj" rows="4" placeholder="Scrie mesajul tƒÉu aici..."></textarea>
        <br>
        <button id="btnTrimite" onclick="trimiteMesaj()">TRIMITE √éN CLOUD ‚òÅÔ∏è</button>
        
        <div id="success-msg">
            <p style="color: #2ed573; font-weight: bold; margin: 0;">‚úÖ MESAJ SALVAT √éN CLOUD!</p>
            <p style="font-size: 14px; margin: 5px 0 0 0;">Acesta va apƒÉrea pe ecran √Æn c√¢teva secunde.</p>
        </div>
    </div>

    <div id="tv-section">
        <h1 style="font-size: 40px; margin-bottom: 30px;">CASƒÇ DE PIATRƒÇ! ‚ú®</h1>
        <div id="display-content">
             <div class="wedding-card">
                <p class="author">SISTEM</p>
                <p class="text">A»ôteptƒÉm urƒÉrile invita»õilor...</p>
             </div>
        </div>
    </div>

    <script>
        // Configura»õia ta din poze
        const firebaseConfig = { databaseURL: "https://felicitari-nunta-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Switch automat intre Telefon si TV
        if(window.innerWidth < 800) {
            document.getElementById('form-section').style.display = 'block';
        } else {
            document.getElementById('tv-section').style.display = 'flex';
        }

        // Functia de trimitere (Telefon)
        function trimiteMesaj() {
            const author = document.getElementById('nume').value;
            const text = document.getElementById('mesaj').value;
            const btn = document.getElementById('btnTrimite');
            const success = document.getElementById('success-msg');

            if(author && text) {
                btn.disabled = true;
                btn.innerText = "Se trimite...";
                
                db.ref('messages').push({ author, text, timestamp: new Date().toLocaleString() })
                .then(() => {
                    success.style.display = 'block';
                    document.getElementById('mesaj').value = '';
                    btn.innerText = "TRIMITE ALT MESAJ";
                    btn.disabled = false;
                    setTimeout(() => { success.style.display = 'none'; }, 6000);
                });
            } else { alert("Te rugƒÉm sƒÉ completezi ambele c√¢mpuri!"); }
        }

        // Logica de afisare (TV)
        let index = 0;
        db.ref('messages').on('value', (snap) => {
            const data = snap.val();
            if(data && window.innerWidth >= 800) {
                const lista = Object.values(data);
                setInterval(() => {
                    const msg = lista[index % lista.length];
                    document.getElementById('display-content').innerHTML = `
                        <div class="wedding-card">
                            <p class="author">${msg.author}</p>
                            <p class="text">"${msg.text || msg.message}"</p>
                        </div>`;
                    index++;
                }, 8000);
            }
        });
    </script>
</body>
</html>
