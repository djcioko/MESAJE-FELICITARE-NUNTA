<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesaje Live NuntƒÉ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; text-align: center; }
        
        /* --- DESIGN TELEFON (FORMULAR) --- */
        #form-section { padding: 30px 15px; display: none; }
        .logo { font-size: 24px; font-weight: bold; color: #f1c40f; margin-bottom: 20px; }
        input, textarea { 
            width: 100%; max-width: 400px; padding: 15px; margin: 10px 0; 
            border-radius: 12px; border: 1px solid #333; background: #1a1a1a; color: #fff; font-size: 16px; 
            box-sizing: border-box;
        }
        button { 
            background: #f1c40f; color: #000; padding: 15px 40px; border: none; 
            border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; width: 100%; max-width: 400px;
        }
        /* Mesajul de confirmare (Cloud) */
        #success-msg { display: none; color: #2ed573; font-weight: bold; margin-top: 20px; animation: fadeIn 0.5s; }

        /* --- DESIGN TV (AFISARE GIGANT) --- */
        #tv-section { height: 100vh; display: none; flex-direction: column; justify-content: center; overflow: hidden; padding: 0 40px; }
        .wedding-card { border: 8px solid #f1c40f; padding: 60px; border-radius: 40px; background: rgba(255,255,255,0.03); animation: zoomIn 1s ease-out; }
        .author { font-size: 50px; color: #f1c40f; text-transform: uppercase; margin-bottom: 20px; letter-spacing: 2px; }
        .text { font-size: 85px; font-style: italic; line-height: 1.1; color: #fff; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

    <div id="form-section">
        <div class="logo">üíç FELICITƒÇRI LIVE</div>
        <h1 style="font-size: 22px;">Trimite un mesaj mirilor!</h1>
        <p style="color: #888;">Urarea ta va apƒÉrea pe ecranul mare.</p>
        
        <input type="text" id="nume" placeholder="Numele tƒÉu...">
        <textarea id="mesaj" rows="4" placeholder="Scrie ceva frumos aici..."></textarea>
        <br>
        <button id="btnTrimite" onclick="trimiteMesaj()">TRIMITE √éN CLOUD ‚òÅÔ∏è</button>
        
        <div id="success-msg">
            <p>‚úÖ Mesajul tƒÉu a plecat √Æn Cloud!</p>
            <p>UitƒÉ-te la televizor peste c√¢teva secunde.</p>
        </div>
    </div>

    <div id="tv-section">
        <h1 style="font-size: 45px; margin-bottom: 30px;">CASƒÇ DE PIATRƒÇ! ‚ú®</h1>
        <div id="display-content">
             <div class="wedding-card">
                <p class="author">Sistem</p>
                <p class="text">A»ôteptƒÉm urƒÉrile invita»õilor...</p>
             </div>
        </div>
    </div>

    <script>
        // Configura»õia ta Firebase
        const firebaseConfig = { databaseURL: "https://felicitari-nunta-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // DetectƒÉm dacƒÉ e Telefon (< 800px) sau TV
        if(window.innerWidth < 800) {
            document.getElementById('form-section').style.display = 'block';
        } else {
            document.getElementById('tv-section').style.display = 'flex';
        }

        // LOGICA TRIMITE (Pentru Telefon)
        function trimiteMesaj() {
            const author = document.getElementById('nume').value;
            const text = document.getElementById('mesaj').value;
            const btn = document.getElementById('btnTrimite');
            const success = document.getElementById('success-msg');

            if(author && text) {
                btn.disabled = true;
                btn.style.opacity = "0.5";
                btn.innerText = "Se trimite...";

                db.ref('messages').push({ 
                    author, 
                    text, 
                    timestamp: new Date().toLocaleString() 
                }).then(() => {
                    success.style.display = 'block';
                    document.getElementById('mesaj').value = '';
                    setTimeout(() => { 
                        success.style.display = 'none'; 
                        btn.disabled = false;
                        btn.style.opacity = "1";
                        btn.innerText = "TRIMITE ALT MESAJ";
                    }, 5000);
                });
            } else {
                alert("Te rugƒÉm sƒÉ scrii numele »ôi mesajul!");
            }
        }

        // LOGICA AFISARE (Pentru TV)
        let mesajeSalvate = [];
        let indexCurent = 0;

        db.ref('messages').on('value', (snap) => {
            const data = snap.val();
            if(data) {
                mesajeSalvate = Object.values(data);
                if(window.innerWidth >= 800) { afiseazaPeTV(); }
            }
        });

        function afiseazaPeTV() {
            if(mesajeSalvate.length === 0) return;
            const msg = mesajeSalvate[indexCurent];
            const content = document.getElementById('display-content');
            
            content.innerHTML = `
                <div class="wedding-card">
                    <p class="author">${msg.author}</p>
                    <p class="text">"${msg.text || msg.message}"</p>
                </div>
            `;
            
            // SchimbƒÉ mesajul la fiecare 10 secunde
            indexCurent = (indexCurent + 1) % mesajeSalvate.length;
        }

        if(window.innerWidth >= 800) {
            setInterval(afiseazaPeTV, 10000);
        }
    </script>
</body>
</html>
